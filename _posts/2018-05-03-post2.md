---
layout: post
title: study180503
---

<h3> ActivityStack과 TaskRecord </h3>

TaskRecord는 mStack이라는 이름의 ActivityStack을 하나 가지고 있음.
기존에 내가 알고 있던 개념에서 크게 다르지 않았다.
Task(TaskRecord)는 작업의 단위이고, ActivityStack을 하나 가지고 있다.
ActivityStack은 단순히 실행순서에 따라 Activity를 저장하며, 
Task는 해당 Task의 실행 시간이나 최근 활성화되었던 시간 등 Task 관리에 필요한 정보를 포함하여 ActivityStack을 유저의 작업 단위로 만들어,
각 작업의 관리를 더 원활하게 할 수 있도록 한 것 같다.

한 가지 납득이 잘 되지 않는 것은, TaskRecord가 작업 관리에 필요한 정보를 포함하여 ActivityStack을 감싸는(?) 형태로 만드는 객체인데,
ActivityStack이 TaskRecord들을 List의 형태로 갖고 있도록 구현이 되어있다.
저번에 mStacks를 보면서 불편하게 느껴졌던 점과 비슷한데, 
mStacks는 List에 저장되는 item이 직접 자신의 List에 접근하여 자신의 index를 수정하는 패턴이 잘 이해가 가지 않았고,
이번에는 TaskRecord가 ActivityStack을 저장하는데 ActivityStack이 TaskRecord들을 저장하는 List를 갖고 있다는 부분이 잘 이해가 되지 않았다.

TaskRecord에서 ActivityStack을 저장하기 위해 선언한 attribute.(이름이 mStack이라 ActivityStack이나 ActivityStackSupervisor에서 선언되어 있는 List와 헷갈릴수 있으니 주의하자)
~~~
    /** Current stack. Setter must always be used to update the value. */
    private ActivityStack mStack;
~~~

ActiviyStack에서 TaskRecord들을 List로 저장하고 있는 부분.
~~~
    /**
     * The back history of all previous (and possibly still
     * running) activities.  It contains #TaskRecord objects.
     */
    private final ArrayList<TaskRecord> mTaskHistory = new ArrayList<>();
~~~

* * *
